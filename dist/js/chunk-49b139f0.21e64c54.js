(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49b139f0"],{"2eeb":function(t,a,e){"use strict";var n=e("1c8b"),i=e("5dfd").map,s=e("1ea7"),o=e("ff9c"),r=s("map"),c=o("map");n({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"491d":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main",attrs:{id:"main"}},[e("collect",{ref:"coll",staticClass:"collect-wp",on:{collect:t.collect}}),Object.keys(t.info).length>1?e("div",{staticClass:"ml-info-wp"},[e("div",{staticClass:"ml-img"},[e("img",{attrs:{src:t._f("imageUrl")(t.info.coverImgUrl)}})]),e("div",{staticClass:"ml-info"},[e("div",{staticClass:"ml-tit1"},[t._v(t._s(t.info.name))]),e("div",{staticClass:"ml-tit2"},[e("img",{attrs:{src:t._f("imageUrl")(t.info.creator.avatarUrl)}}),e("span",{staticClass:"name"},[t._v(t._s(t.info.creator.nickname))]),e("span",{staticClass:"time"},[t._v(t._s(t._f("dfmt")(t.info.createTime))+" 创建")])]),e("div",{staticClass:"ml-bn",on:{click:t.playAll}},[t._v(" 播放全部 ")]),e("div",{staticClass:"ml-tips"},[t._v(" 标签："+t._s(t.info.tags)+" ")]),e("div",{staticClass:"ml-wd"},[t._v(" 简介："+t._s(t.info.description)+" ")])])]):t._e(),e("div",{staticClass:"ml-list-wp"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"歌曲列表",name:"first"}},[e("songs-list",{ref:"songs",attrs:{mTableData:t.mTableData},on:{imgDone:t.imgDone}})],1),e("el-tab-pane",{attrs:{label:t.tabTit,name:"second"}},[e("comments",{attrs:{hot:t.hot,comments:t.comments,cnum:t.cnum}}),e("pagination",{attrs:{pageSize:t.pageSize,total:t.cnum},on:{goPage:t.goPage}})],1)],1)],1)],1)},i=[],s=(e("3466"),e("2eeb"),e("053b"),e("e18c"),e("1c2e"),e("8e05")),o=e("ac58"),r=e("1b4d"),c=e("e6a2"),l=e("3f4e"),m=e("90b9"),u=e("eecb"),f={name:"MusicList",data:function(){return{info:{},mTableData:[],activeName:"first",trackIds:[],firstCK:!1,id:"",cnum:0,tabTit:"",comments:[],hot:[],pageSize:20,loading:!0,loadNum:0,cur:-1}},mixins:[u["d"]],components:{Pagination:s["a"],Comments:c["a"],SongsList:o["a"],Collect:r["a"]},watch:{$route:function(t,a){this.init()}},created:function(){this.init()},filters:{dfmt:function(t){var a=new Date(t);return Object(m["b"])("YYYY-mm-dd",a)}},mounted:function(){var t=this;this.$refs.coll.ison=Object(m["a"])(this.id,"songSheet");var a=this;this.$bus.$on("openList",(function(e){t.cur=-1,t.mTableData.findIndex((function(t,n,i){e===t.id&&(a.cur=n)})),void 0!=t.$refs.songs&&(t.$refs.songs.cur=t.cur)}))},methods:{collect:function(t){var a={};a.id=this.id,a.name=this.info.name,!0===t?Object(m["g"])(a,"songSheet"):Object(m["f"])(a,"songSheet"),this.$bus.$emit("itemChange")},handleClick:function(){},handleCurrentChange:function(t){this.currentRow=t},init:function(){var t=this;this.loading=!0;var a=this.$route.params.id;this.id=a,Object(l["b"])(a).then((function(a){t.info=a.playlist,t.trackIds=a.playlist.trackIds,t.createList(t.trackIds)})),Object(l["a"])(a,this.pageSize,0).then((function(a){t.comments=a.comments,t.hot=a.hotComments,t.cnum=a.total,t.tabTit="评论("+a.total+")"}))},createList:function(t){var a=this,e=t.map((function(t,a,e){return t.id}));Object(l["c"])(e.toString()).then((function(t){a.mTableData=t.songs,a.$refs.songs.firstCK=!1,a.loading=!1}))},goPage:function(t){var a=this,e=(t-1)*this.pageSize;Object(l["a"])(this.id,this.pageSize,e).then((function(t){a.comments=t.comments,a.hot=0===e?t.hotComments:[],document.getElementById("main").scrollTop=460,a.loading=!1}))},playAll:function(){this.playSong(this.mTableData[0])},imgDone:function(){this.loading=!1}}},d=f,h=(e("e6e3"),e("9ca4")),b=Object(h["a"])(d,n,i,!1,null,"67a204f2",null);a["default"]=b.exports},"49bc":function(t,a,e){"use strict";var n=e("80c0"),i=e.n(n);i.a},"80c0":function(t,a,e){},ac58:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"slist"},[e("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.mTableData,"highlight-current-row":""},on:{"row-click":t.playSong,"current-change":t.handleCurrentChange}},[e("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e("el-table-column",{attrs:{label:" ",width:"130"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("img",{staticClass:"timg",attrs:{src:t.imgSrc(a)},on:{load:t.timgload}})]}}])}),e("el-table-column",{attrs:{property:"name",label:"音乐标题",width:""}}),e("el-table-column",{attrs:{property:"name",formatter:t.person,label:"歌手"}}),e("el-table-column",{attrs:{property:"name",label:"专辑",formatter:t.edition,width:""}}),e("el-table-column",{attrs:{property:"dt",formatter:t.fomat,width:"100",label:"时长"}})],1)],1)},i=[],s=(e("9302"),e("053b"),e("e35a"),e("0d7a"),e("52ef")),o=e("90b9"),r={name:"SongsList",data:function(){return{loadNum:0,firstCK:!1,cur:0}},props:{mTableData:{type:Array,default:function(){return[]}}},mounted:function(){var t=this;this.$bus.$on("collectClick",(function(){t.firstCK=!1}))},watch:{cur:function(){-1===this.cur?this.$refs.singleTable.setCurrentRow():this.$refs.singleTable.setCurrentRow(this.mTableData[this.cur])}},methods:{playSong:function(t){this.firstCK||(this.$store.commit("addMusicList",this.mTableData),this.firstCK=!0,this.$bus.$emit("listClick")),this.$bus.$emit("play",t),this.$refs.singleTable.setCurrentRow(this.mTableData[this.cur])},handleCurrentChange:function(t){this.currentRow=t},timgload:function(){this.loadNum++,this.loadNum>=this.mTableData.length&&this.$emit("imgDone")},imgSrc:function(t){return t.row.hasOwnProperty("al")?"//"+t.row.al.picUrl.split("//")[1]+"?param=120y120":"//"+t.row.album.picUrl.split("//")[1]+"?param=120y120"},fomat:function(t){return t.hasOwnProperty("artists")?Object(o["d"])(t.duration/1e3):Object(o["d"])(t.dt/1e3)},person:function(t){if(t.hasOwnProperty("artists")){var a,e=[],n=Object(s["a"])(t.artists);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.push(i.name)}}catch(m){n.e(m)}finally{n.f()}return e.join("/")}var o,r=[],c=Object(s["a"])(t.ar);try{for(c.s();!(o=c.n()).done;){var l=o.value;r.push(l.name)}}catch(m){c.e(m)}finally{c.f()}return r.join("/")},edition:function(t){return t.hasOwnProperty("artists")?t.album.name:t.al.name}}},c=r,l=(e("49bc"),e("9ca4")),m=Object(l["a"])(c,n,i,!1,null,"2edfdb60",null);a["a"]=m.exports},e6e3:function(t,a,e){"use strict";var n=e("ec9d"),i=e.n(n);i.a},ec9d:function(t,a,e){}}]);
//# sourceMappingURL=chunk-49b139f0.21e64c54.js.map